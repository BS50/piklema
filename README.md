### Демо проект: Облачная система сбора данных телеметрии:

Данная система разработана согласно тестового [задания:](https://docs.google.com/document/d/1UB3H_9MpZAsUqc4Bc7Se_LWxLXXg6w-ue_yfv6iTz_w/edit)  
В системе реализована генерация данных с различных девайсов с передачей их на процессор, в котором для каждого девайса установлены допустимые теги (например, в реальном проекте это могут быть 
датчики) со своими пределами значений. При поступлении данных от девайса они проходят валидацию после чего записываются в базу данных.  

Архитектура проекта выстроена таким образом, что данные генерируются с различных девайсов, после чего по принципу очереди помещаются в резидентную систему управления базами данных Redis от куда они
поступают в процессор и пройдя валидацию сохраняются в основное хранилище - базу данных Postgres. В проекте реализовано API, позволяющее просматривать, добавлять, изменять и удалять имеющиеся в базе 
данных девайсы, теги и их значения согласно которым осуществляется валидация входных данных.

### В данном проекте применены следующие технологии:
* Проект построен на фреймворке Django;
* Postgres - база данных для хранения телеметрии;
* Redis - база данных для реализации очереди сообщений;
* Pydantic - библиотека, предоставляющая функции для проверки, анализа данных;
* Pytest - библиотека для тестирования;

### Запуск приложения:
* Склонировать проект по [ссылке:](https://github.com/BS50/piklema.git)
* Установить и активировать переменные окружения
* Создать в корневой директории папку logs
* `pip install -r requirements.txt` установить зависимости
* `docker build -t piklema_backend_base -f DockerfileBase .` создать базовый образ
* `docker compose -f docker-compose.yml up` - запустить проект в контейнере;
* `docker exec -it piklema_backend bash` - зайти в контейнер;
* `python manage.py test piklema` - запустить тесты;
* `python manage.py loaddata db.json` - наполнить базу данных первичными значениями;
* Ctrl + D (на Linux) - выйти из контейнера;
* `python device_script.py` - запустить скрипт генерации данных;

**Запросить по id = 1 устройства его последние сохраненные данные в хранилище через cURL:**  
`curl --location 'http://localhost:8000/piklema/device/1/tag_values/'`  

Логи приложения можно посмотерть в папке logs в корневом каталоге проекта.

Переконфигурировать хранилище можно по следующему API:
* `http://localhost:8000/piklema/device/` GET запрос - запросить все девайсы;
* `http://localhost:8000/piklema/device/1/` GET, PUT, DELETE запрос - запросить, удалить или изменить девайс по id = 1;  
  {
  "name": "device_4",
  "user_id": 1
  }

* `http://localhost:8000/piklema/tag/` GET запрос - запросить все теги;
* `http://localhost:8000/piklema/tag/1/` GET, PUT, DELETE запрос - запросить, удалить или изменить тег по id = 1;  
  {
  "name": "tag_1",
  "ratio": 0.5,
  "device_id": 2,
  "min": -200,
  "max": 200
  }

* `http://localhost:8000/piklema/tag_value/` GET запрос - запросить все данные поступившие с девайсов;
* `http://localhost:8000/piklema/tag_value/1/` GET запрос - запросить данные поступившие с девайсов записи по id = 1;

* `http://localhost:8000/piklema/user/` POST запрос - создать нового пользователя;  
  {
  "username": "user",
  "email": "user@gmail.com",
  "password": "12345"
  }
